---
title: 欧拉路径
tags:
  - Eulerian Path
---

# 欧拉路径

欧拉路径（$\text{Eulerian Path}$）是指一条经过图中每条边恰好一次的路径。如果一条欧拉路径的起点和终点相同，则称为欧拉回路（$\text{Eulerian Circuit}$）。

使用 $\text{Hierholzer}$ 算法可以有效地找到欧拉路径。以下是该算法的步骤：

1. 检查图的性质：
      - 对于无向图，若存在欧拉回路，则所有顶点的度数均为偶数；若存在欧拉路径但不是回路，则恰有两个顶点的度数为奇数。
      - 对于有向图，若存在欧拉回路，则每个顶点的入度等于出度；若存在欧拉路径但不是回路，则恰有一个顶点的出度比入度大 $1$，另一个顶点的入度比出度大 $1$。
2. 查找欧拉路径：
      - 选择一个起点：
          - 欧拉回路：可以从任意顶点开始。
          - 欧拉路径：无向图中选择一个度数为奇数的顶点作为起点；有向图中选择出度比入度大 $1$ 的顶点作为起点。
      - 从起点出发，进行深度优先搜索。
      - 每次沿着某条边从某个顶点移动到另外一个顶点的时候，都需要删除这条边。
      - 当无法继续前进时，将当前顶点加入路径中，并回溯到上一个顶点继续搜索，直到所有边都被访问过。
3. 输出结果：
      - 注意到只有那个入度与出度差为 $1$ 的节点会导致死胡同，而该节点必然是最后一个遍历到的节点。因此可以改变入栈的规则，当我们遍历完一个节点所连的所有节点后，我们才将该节点入栈（即逆序入栈）。
      - 最终路径需要反转以获得正确的顺序。

???+ note "[骑马修栅栏 Riding the Fences](https://www.luogu.com.cn/problem/P2731){target='_blank'}"

    给定一个无向图，要求输出一条经过每条边恰好一次的路径，且路径字典序最小。题目保证至少存在一条欧拉路径。

    ```cpp
    --8<-- "code/Graph/EulerPath/P2731.cpp"
    ```

???+ note "[【模板】欧拉路径](https://www.luogu.com.cn/problem/P7771){target='_blank'}"

    给定一个有向图，要求输出一条经过每条边恰好一次的路径，且路径字典序最小。如果不存在欧拉路径，则输出 "No"。

    ```cpp
    --8<-- "code/Graph/EulerPath/P7771.cpp"
    ```